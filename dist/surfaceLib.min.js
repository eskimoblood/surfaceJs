(function(){var t,i,s,e,h,n,o,r,a,c,u,p={}.hasOwnProperty,l=function(t,i){function s(){this.constructor=t}for(var e in i)p.call(i,e)&&(t[e]=i[e]);return s.prototype=i.prototype,t.prototype=new s,t.__super__=i.prototype,t};window.Surface=function(){function t(t){var i,s,e;this.settings=t,this.setDefaults(),e=this.getRange(),i=this.lookUp(this.settings.phiSteps,e.minPhi,e.maxPhi),s=this.lookUp(this.settings.thetaSteps,e.minTheta,e.maxTheta),this.preCalculateLookUps(i,s)}return t.prototype.Vector3=THREE.Vector3,t.prototype.Face4=THREE.Face4,t.prototype.lookUp=function(t,i,s){var e,h;return e=i+(s-i),h=e/(t-1),function(i,s){var e,n,o,r;for(r=[],e=o=0;t>=o;e=o+=1)n=h*e,i?r.push(i(n,s)):r.push(n);return r}},t.prototype.powerMultiply=function(t,i){return Math.pow(t*i.c,i.d)},t.prototype.multiply=function(t,i){return t*i},t.prototype.multiplyFunc=function(t){return function(i,s){return t(i*s)}},t.prototype.addFunc=function(t){return function(i,s){return t(i+s)}},t.prototype.cosH=function(t){return(Math.exp(t)+Math.exp(-t))/2},t.prototype.getGeometry=function(){return this.createGeometry(this.calc())},t.prototype.calc=function(){var t,i,s,e,h,n,o,r;for(e=[],t=[],i=h=0,o=this.settings.phiSteps-1;o>=h;i=h+=1)for(s=n=0,r=this.settings.thetaSteps-1;r>=n;s=n+=1)e.push(this.calcVertex(i,s)),this.settings.phiSteps-1>i&&this.settings.thetaSteps-1>s&&t.push(this.calcFace(i,s));return{vertices:e,faces:t}},t.prototype.createGeometry=function(t){var i;return i=new THREE.Geometry,i.dynamic=!0,i.vertices=t.vertices,i.faces=t.faces,i.vertexColors=t.colors,i.colors=t.colors,i.colorsNeedUpdate=!0,i.computeFaceNormals(),i.computeVertexNormals(),i},t.prototype.calcFace=function(t,i){var s,e,h,n,o,r,a;return s=t*this.settings.thetaSteps+i,e=s+1,h=(t+1)*this.settings.thetaSteps+i,r=h+1,n=this.colorsBetween(this.settings.colors,t/this.settings.phiSteps),o=this.colorsBetween(this.settings.colors,(t+1)/this.settings.phiSteps),a=new this.Face4(s,h,r,e),a.vertexColors=[n,o,o,n],a},t.prototype.setDefaults=function(){var t,i,s=this;t=function(t){return null==s.settings[t]&&(s.settings[t]=s.defaultSettings[t])};for(i in this.defaultSettings)t(i);return null},t.prototype.calcColorArray=function(t,i){var s,e,h;for(h=[],s=e=0;i>=0?i>=e:e>=i;s=i>=0?++e:--e)h.push(this.colorsBetween(t,s/i));return h},t.prototype.colorBetween=function(t,i,s){var e;return e=this.calcColor(t,i,s),new THREE.Color(e(24)+e(16)+e(8)+e(0))},t.prototype.calcColor=function(t,i,s){return function(e){var h,n;return n=255&t>>e,h=255&i>>e,n+(h-n)*s<<e}},t.prototype.colorsBetween=function(t,i){var s,e,h,n,o;return 0>=i&&t[0],h=t.length,i>=1&&t[h-1],s=Math.floor(h*i),e=1/h,n=(i-s*e)/e,o=s+1,o>=h&&(o=0),this.colorBetween(t[s],t[o],n)},t}(),window.DoubleCone=function(i){function s(){return t=s.__super__.constructor.apply(this,arguments)}return l(s,i),s.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:-1,maxTheta:1}},s.prototype.preCalculateLookUps=function(t,i){return this.identyTheta=i(),this.cosPhi=t(Math.cos),this.cosPhiAdd=t(this.addFunc(Math.cos),2*Math.PI/3),this.cosPhiSubtract=t(this.addFunc(Math.cos),2*-Math.PI/3)},s.prototype.calcVertex=function(t,i){return new this.Vector3(this.identyTheta[i]*this.cosPhi[t],(this.identyTheta[i]-1)*this.cosPhiAdd[t],(1-this.identyTheta[i])*this.cosPhiSubtract[t])},s}(Surface),window.EnnepersSurface=function(t){function s(){return i=s.__super__.constructor.apply(this,arguments)}return l(s,t),s.prototype.getRange=function(){return{minPhi:-2,maxPhi:2,minTheta:-2,maxTheta:2}},s.prototype.preCalculateLookUps=function(t,i){return this.identityTheta=i(),this.identityPhi=t(),this.sqTheta=i(Math.pow,2),this.sqPhi=t(Math.pow,2),this.pow3Theta=i(Math.pow,3),this.pow3Phi=t(Math.pow,3)},s.prototype.calcVertex=function(t,i){return new this.Vector3(this.identityPhi[t]*(1+this.sqTheta[i])-this.pow3Phi[t]/3,this.identityTheta[i]*(1+this.sqPhi[t])-this.pow3Theta[i]/3,this.sqPhi[t]*this.sqTheta[i])},s}(Surface),window.FishSurface=function(t){function i(){return e=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:0,maxTheta:Math.PI}},i.prototype.preCalculateLookUps=function(t,i){return this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos),this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.sinThetaMultiply=i(this.multiplyFunc(Math.sin),2),this.cosThetaMultiply=i(this.multiplyFunc(Math.cos),2)},i.prototype.calcVertex=function(t,i){return new this.Vector3((this.cosTheta[i]-this.cosThetaMultiply[i])*this.cosPhi[t]/4,(this.sinTheta[i]-this.sinThetaMultiply[i])*this.sinPhi[t]/4,this.cosTheta[i])},i}(Surface),window.Horn=function(t){function i(){return h=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:0,maxTheta:1}},i.prototype.preCalculateLookUps=function(t,i){return this.identityTheta=i(),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos),this.sinThetaMultiply=i(this.multiplyFunc(Math.sin),2*Math.PI),this.cosThetaMultiply=i(this.multiplyFunc(Math.cos),2*Math.PI)},i.prototype.calcVertex=function(t,i){return new this.Vector3((2+this.identityTheta[i]*this.cosPhi[t])*this.sinThetaMultiply[i],(2+this.identityTheta[i]*this.cosPhi[t])*this.cosThetaMultiply[i]+2*this.identityTheta[i],this.identityTheta[i]*this.sinPhi[t])},i}(Surface),window.JetSurface=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:0,maxTheta:Math.PI}},i.prototype.preCalculateLookUps=function(t,i){return this.sinTheta=i(Math.sin),this.coshTheta=i(this.cosH),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos)},i.prototype.calcVertex=function(t,i){return new this.Vector3((1-this.coshTheta[i])*this.sinTheta[i]*this.cosPhi[t]/2,50*(1-this.coshTheta[i])*this.sinTheta[i]*this.sinPhi[t]/2,this.coshTheta[i])},i}(Surface),window.MoebiusStrip=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:-.4,maxPhi:.4,minTheta:0,maxTheta:2*Math.PI}},i.prototype.preCalculateLookUps=function(t,i){return this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.sinThetaMultiply=i(this.multiplyFunc(Math.sin),.5),this.cosThetaMultiply=i(this.multiplyFunc(Math.cos),.5),this.identityPhi=t(this.multiply,1)},i.prototype.calcVertex=function(t,i){return new this.Vector3(this.cosTheta[i]*(1+this.identityPhi[t]*this.cosThetaMultiply[i]),this.sinTheta[i]+(1+this.identityPhi[t]*this.cosThetaMultiply[i]),this.identityPhi[t]*this.sinThetaMultiply[i])},i}(Surface),window.Pillow=function(t){function i(){return r=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:-Math.PI,maxPhi:Math.PI,minTheta:-Math.PI,maxTheta:Math.PI}},i.prototype.preCalculateLookUps=function(t,i){return this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos)},i.prototype.calcVertex=function(t,i){return new this.Vector3(this.cosTheta[i],this.cosPhi[t],this.sinTheta[i]*this.sinPhi[t])},i}(Surface),window.Shell=function(t){function i(){return a=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:0,maxTheta:2*Math.PI}},i.prototype.defaultSettings={innerRadius:1,outerRadius:2,height:5,spirals:3},i.prototype.preCalculateLookUps=function(t,i){return this.identityTheta=i(),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos),this.sinThetaMultiply=i(this.multiplyFunc(Math.sin),this.settings.spirals),this.cosThetaMultiply=i(this.multiplyFunc(Math.cos),this.settings.spirals)},i.prototype.calcVertex=function(t,i){var s;return s=this.settings.outerRadius*(1-2*(this.identityTheta[i]/Math.PI)),new this.Vector3(s*this.cosThetaMultiply[i]*(1+this.cosPhi[t]+this.settings.innerRadius),s*this.sinThetaMultiply[i]*(1+this.cosPhi[t]+this.settings.innerRadius),this.settings.height*2*(this.identityTheta[i]/Math.PI)+s*this.sinPhi[t])},i}(Surface),window.Sphere=function(t){function i(){return c=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:2*Math.PI,minTheta:0,maxTheta:Math.PI}},i.prototype.preCalculateLookUps=function(t,i){return this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos)},i.prototype.calcVertex=function(t,i){return new this.Vector3(this.sinTheta[i]*this.cosPhi[t],this.sinTheta[i]*this.sinPhi[t],this.cosTheta[i])},i}(Surface),window.SphereHarmonics=function(t){function i(){return u=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:0,maxPhi:Math.PI,minTheta:0,maxTheta:2*Math.PI}},i.prototype.defaultSettings={m0:10,m1:10,m2:0,m3:5,m4:5,m5:40,m6:0,m7:0},i.prototype.r=function(t,i){return Math.pow(Math.sin(i[0]*t),i[1])+Math.pow(Math.cos(i[2]*t),i[3])},i.prototype.preCalculateLookUps=function(t,i){return this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.sinPhi=t(Math.sin),this.cosPhi=t(Math.cos),this.r1=t(this.r,[this.settings.m0,this.settings.m1,this.settings.m2,this.settings.m3]),this.r2=i(this.r,[this.settings.m4,this.settings.m5,this.settings.m6,this.settings.m7])},i.prototype.calcVertex=function(t,i){return new this.Vector3((this.r1[t]+this.r2[i])*this.sinPhi[t]*this.cosTheta[i],(this.r1[t]+this.r2[i])*this.cosPhi[t],(this.r1[t]+this.r2[i])*this.sinPhi[t]*this.sinTheta[i])},i}(Surface),window.SuperDuperShape=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.getRange=function(){return{minPhi:-Math.PI/2*this.settings.c2,maxPhi:Math.PI/2*this.settings.c2,minTheta:-Math.PI*this.settings.c1,maxTheta:Math.PI*this.settings.c1}},i.prototype.defaultSettings={t1:0,d1:0,m1:6,n11:8,n12:15,n13:30,t2:0,d2:0,m2:4,n21:12,n22:10,n23:10,c1:2,c2:4,c3:1},i.prototype.preCalculateLookUps=function(t,i){var s,e;return this.sinTheta=i(Math.sin),this.cosTheta=i(Math.cos),this.theta=i(),this.phi=t(),s={m:this.settings.m1,n1:this.settings.n11,n2:this.settings.n12,n3:this.settings.n13},e={m:this.settings.m2,n1:this.settings.n21,n2:this.settings.n22,n3:this.settings.n23},this.r1=i(this.superFormular,s),this.r2=t(this.superFormular,e),this.d1=i(this.powerMultiply,{c:this.settings.c1,d:this.settings.d1}),this.d2=i(this.powerMultiply,{c:this.settings.c2,d:this.settings.d2}),this.t2=i(this.multiply,this.settings.t2*this.settings.c2),this.t2c=Math.pow(this.settings.c2,this.settings.d2)*this.settings.t2*this.settings.c2/2},i.prototype.superFormular=function(t,i){var s,e;return s=Math.pow(Math.abs(Math.cos(i.m*t/4)),i.n2),e=Math.pow(Math.abs(Math.sin(i.m*t/4)),i.n3),Math.pow(s+e,-1/i.n1)},i.prototype.calcVertex=function(t,i){var s,e;return e=this.phi[t]+this.settings.c3*this.theta[i],s=this.r1[i]*(this.settings.t1+this.d1[i]*this.r2[t]*Math.cos(e)),new this.Vector3(s*this.sinTheta[i],s*this.cosTheta[i],this.d2[i]*(this.r2[t]*Math.sin(e)-this.t2[i])+this.t2c)},i}(Surface)}).call(this);